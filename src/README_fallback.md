# üîÑ Fallback —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è LLM —ç–∫—Å—Ç—Ä–∞–∫—Ç–æ—Ä–∞

## –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–µ–∂–¥—É LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏ –∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã.

## –ü—Ä–æ–≤–∞–π–¥–µ—Ä—ã

### 1. OpenRouter (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1)
- **–ú–æ–¥–µ–ª—å**: qwen/qwen3-235b-a22b:free
- **–õ–∏–º–∏—Ç—ã**: 50 –∑–∞–ø—Ä–æ—Å–æ–≤/–¥–µ–Ω—å, 1 –∑–∞–ø—Ä–æ—Å/–º–∏–Ω
- **Fallback**: –ü—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–æ–≤

### 2. Groq (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 - Fallback)
- **–ú–æ–¥–µ–ª—å**: llama3-8b-8192
- **–õ–∏–º–∏—Ç—ã**: –ó–∞–≤–∏—Å–∏—Ç –æ—Ç –ø–ª–∞–Ω–∞
- **Fallback**: –ü—Ä–∏ –æ—à–∏–±–∫–∞—Ö OpenRouter

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–î–æ–±–∞–≤—å—Ç–µ –≤ `.env` —Ñ–∞–π–ª:

```bash
# OpenRouter (–æ—Å–Ω–æ–≤–Ω–æ–π)
OPENROUTER_API_KEY=your-openrouter-api-key
OPENROUTER_MODEL=qwen/qwen3-235b-a22b:free
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# Groq (fallback)
GROQ_API_KEY=your-groq-api-key
GROQ_MODEL=llama3-8b-8192
GROQ_BASE_URL=https://api.groq.com/openai/v1
```

## –õ–æ–≥–∏–∫–∞ Fallback

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏:
- Rate limit exceeded (429)
- Quota exceeded
- Service unavailable
- Timeout errors
- Connection errors

### –ú–∞–∫—Å–∏–º—É–º –ø–æ–ø—ã—Ç–æ–∫: 2

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```python
from llm_extractor import ContactExtractor

# –°–æ–∑–¥–∞–Ω–∏–µ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ä–µ–∂–∏–º–µ
extractor = ContactExtractor(test_mode=True)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã
health = extractor.get_provider_health()

# –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–∫–∞–∑–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
extractor.simulate_provider_failure('openrouter')

# –°–±—Ä–æ—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è
extractor.reset_system_state()
```

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –°—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫ fallback
- –û–±—â–µ–µ –∑–¥–æ—Ä–æ–≤—å–µ —Å–∏—Å—Ç–µ–º—ã
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
‚úÖ **–≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –î–µ—Ç–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚úÖ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–∫–∞–∑–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–æ–≥–∏–∫–∏
‚úÖ **–ì–∏–±–∫–æ—Å—Ç—å**: –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
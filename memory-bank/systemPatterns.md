# –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°–ª–æ–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

1. **Email Layer** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –ø–∞—Ä—Å–∏–Ω–≥ –ø–∏—Å–µ–º.
2. **OCR Layer** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π, —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞.
3. **LLM Layer** ‚Äî –∞–Ω–∞–ª–∏–∑, –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ —Å—É—â–Ω–æ—Å—Ç–µ–π.
4. **Export Layer** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Google Sheets/Contacts.
5. **Knowledge Layer** ‚Äî —Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î + RAG.

### Fallback-–ª–æ–≥–∏–∫–∞

* **OCR**: –ø—Ä–∏ —Å–±–æ–µ –¥–≤–∏–∂–∫–∞ ‚Üí –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∑–µ—Ä–≤–Ω—ã–π.
* **LLM**: –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö API ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏ (OpenRouter ‚Üí Groq).
* **–≠–∫—Å–ø–æ—Ä—Ç**: –ø—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–ø–∏—Å–∏ –≤ Google ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ CSV.
* **–û—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è** —Å emoji-–º–∞—Ä–∫–∏—Ä–æ–≤–∫–æ–π: üîç –ø—Ä–æ–≤–µ—Ä–∫–∞, ‚úÖ —É—Å–ø–µ—Ö, ‚ùå –æ—à–∏–±–∫–∞, üîÑ fallback.

### –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

* –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —á–µ—Ä–µ–∑ Python-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã.
* –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–≤–∏–∂–∫–æ–≤ –∏–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–Ω—ã—Ö –∫–∞–Ω–∞–ª–æ–≤ –Ω–µ –ª–æ–º–∞–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É.
* Fallback —Å–∏—Å—Ç–µ–º–∞ –ª–µ–≥–∫–æ —Ä–∞—Å—à–∏—Ä—è–µ—Ç—Å—è –Ω–æ–≤—ã–º–∏ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏.

---

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ LLM-–º–æ–¥—É–ª—é

* –ò–∑–≤–ª–µ–∫–∞–µ—Ç **–≤–Ω–µ—à–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã** (–æ—Ç—Å–µ–∫–∞–µ–º –¥–æ–º–µ–Ω `@dna-technology.ru`).
* –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç ¬´–Ω–µ–ø–æ–ª–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã¬ª (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ñ–∞–º–∏–ª–∏—è + e-mail, –ª–∏–±–æ —Ç–µ–ª–µ—Ñ–æ–Ω –±–µ–∑ –∏–º–µ–Ω–∏).
* –°–æ–±–∏—Ä–∞–µ—Ç —Ç–µ–ª–µ—Ñ–æ–Ω—ã –≤—Å–µ—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤, –≤–∫–ª—é—á–∞—è:

  * –º–æ–±–∏–ª—å–Ω—ã–µ, –≥–æ—Ä–æ–¥—Å–∫–∏–µ, 8-800,
  * –¥–æ–±–∞–≤–æ—á–Ω—ã–µ (–¥–æ–±., –¥–æ–ø., –≤–Ω., ext.),
  * –Ω–æ–º–µ—Ä–∞ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é –∏ –≤ —Å–∫–æ–±–∫–∞—Ö.
* Summary –ø–æ –∫–∞–∂–¥–æ–º—É –ø–∏—Å—å–º—É: –∫—Ç–æ –∫–æ–º—É —á—Ç–æ –æ–±–µ—â–∞–ª/–ø—Ä–æ—Å–∏–ª.
* –ö–ü: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Ü–µ–Ω—ã, –Ω–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞, —Å—Ä–æ–∫–∏, –≤–∞–ª—é—Ç–∞).
* –ö–∞—á–µ—Å—Ç–≤–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è:

  * —É–≤–µ—Ä–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã ‚Üí Google Contacts,
  * —Å–ø–æ—Ä–Ω—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã ‚Üí –æ—Ç–¥–µ–ª—å–Ω–∞—è –≤–∫–ª–∞–¥–∫–∞ Sheets (¬´–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—Ä—É—á–Ω—É—é¬ª).

### Fallback —Å–∏—Å—Ç–µ–º–∞ LLM

* **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞**: OpenRouter (–æ—Å–Ω–æ–≤–Ω–æ–π) ‚Üí Groq (fallback)
* **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –ø—Ä–∏:
  - Rate limit exceeded (429)
  - Quota exceeded
  - Service unavailable
  - Timeout errors
  - Connection errors
* **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è** –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
* **–¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º** –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ fallback –ª–æ–≥–∏–∫–∏
* **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ–ø—ã—Ç–æ–∫** (–º–∞–∫—Å–∏–º—É–º 2) –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è

---

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

* –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –∏ KPI-–º–µ—Ç—Ä–∏–∫ –≤ Google Sheets/Contacts.
* –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –±–∞–∑–µ (Faiss/PGVector).
* –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ Retrieval-Augmented Generation –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.
* –í–µ–±-UI (React) + –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Flutter) –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ RAG-–ø–æ–∏—Å–∫—É.
* –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ —Å backend-OCR –∏ LLM.

### –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤

* –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–≥–∏–æ–Ω–æ–≤, —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è, –±—é–¥–∂–µ—Ç–∞ –∏ —Å—Ä–æ—á–Ω–æ—Å—Ç–∏. –≠—Ç–æ —É–ª—É—á—à–∏—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–∞–º–∏ –≤ CRM –∏ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ Google Sheets.

---

### –ë–ª–∏–∂–∞–π—à–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏

* ‚úÖ –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –±–∞–≥–∏ –≤ `advanced_email_fetcher.py`.
* ‚úÖ –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ OCR-—Ç–µ—Å—Ç–µ—Ä (`test_improved_ocr_universal.py`) –≤ —Å–µ—Ä–≤–∏—Å.
* ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å OCR ‚Üî LLM –º–æ–¥—É–ª—å.
* ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å fallback —Å–∏—Å—Ç–µ–º—É –¥–ª—è LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤.
* [ ] –≠–∫—Å–ø–æ—Ä—Ç —Å—É—â–Ω–æ—Å—Ç–µ–π –≤ Google Contacts –∏ Sheets.
* [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤, summary –∏ –ö–ü –≤–æ –≤–µ–∫—Ç–æ—Ä–Ω–æ–π –ë–î.
* [ ] –°–æ–∑–¥–∞–Ω–∏–µ RAG-–±–∞–∑—ã (–∏–Ω–≥–µ—Å—Ç, –∏–Ω–¥–µ–∫—Å, retrieval API).
* [ ] –†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –≤–µ–±-–¥–∞—à–±–æ—Ä–¥ (React+FastAPI) –∏ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Flutter).


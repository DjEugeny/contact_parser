# –û—Ç—á–µ—Ç –æ–± –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ LLM –æ–±—Ä–∞–±–æ—Ç–∫–∏

**–î–∞—Ç–∞:** 2025-01-21 23:15 (UTC+07)  
**–ó–∞–¥–∞—á–∞:** –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ `zsh: killed` –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ GPT-5 Nano –Ω–∞ Replicate

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤ –≤–æ–∑–Ω–∏–∫–∞–ª–∞ –æ—à–∏–±–∫–∞ `zsh: killed`, —É–∫–∞–∑—ã–≤–∞—é—â–∞—è –Ω–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤ –ø–∞–º—è—Ç–∏. –ê–Ω–∞–ª–∏–∑ –ø–æ–∫–∞–∑–∞–ª:
- 61 —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª –≤ `data/final_results/texts`
- –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–æ–≤ –¥–æ 17 –ö–ë
- –ü—Ä–æ–±–ª–µ–º–∞ –≤ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ Replicate (GPT-5 Nano)
**–§–∞–π–ª:** `src/llm_extractor.py` (—Å—Ç—Ä–æ–∫–∏ 402-419)

- `max_tokens`: —É–≤–µ–ª–∏—á–µ–Ω –¥–æ 8000 (–±—ã–ª–æ –Ω–µ –∑–∞–¥–∞–Ω–æ)
- `temperature`: —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–∞ 0 –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- `top_p`: 0.9 –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—è —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏—è
- `frequency_penalty`: 0.1 –ø—Ä–æ—Ç–∏–≤ –ø–æ–≤—Ç–æ—Ä–æ–≤
- `presence_penalty`: 0.1 –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–µ–º
- –î–æ–±–∞–≤–ª–µ–Ω "STRICT JSON ONLY!" –≤ –ø—Ä–æ–º–ø—Ç

### 2. Post-–≤–∞–ª–∏–¥–∞—Ü–∏—è JSON
**–§–∞–π–ª:** `src/llm_extractor.py` (—Å—Ç—Ä–æ–∫–∏ 589-608)

- –°—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã JSON –æ—Ç–≤–µ—Ç–∞
- –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π (`contacts`, `business_context`)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—Ä–æ—Å –ø—Ä–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º JSON

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤
**–§–∞–π–ª:** `src/llm_extractor.py` (—Å—Ç—Ä–æ–∫–∏ 609-685)

- –£–º–µ–Ω—å—à–µ–Ω —Ä–∞–∑–º–µ—Ä —á–∞—Å—Ç–µ–π: 10000 ‚Üí 8000 —Å–∏–º–≤–æ–ª–æ–≤
- –ü—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —É–º–µ–Ω—å—à–µ–Ω–æ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ: 1000 ‚Üí 800 —Å–∏–º–≤–æ–ª–æ–≤
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏ (`gc.collect()`) –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏
- –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∫–æ–Ω—Ü–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### 4. –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∑–∞–ø—Ä–æ—Å–∞ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö JSON
**–§–∞–π–ª:** `src/llm_extractor.py` (—Å—Ç—Ä–æ–∫–∏ 299-383)

- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON
- –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–æ–º–ø—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º "STRICT JSON ONLY!"
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å —Å –æ—Å—Ç–∞–≤—à–∏–º–∏—Å—è –ø–æ–ø—ã—Ç–∫–∞–º–∏

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚úÖ **–£—Å–ø–µ—à–Ω–æ:**
- –¢–µ—Å—Ç–æ–≤—ã–π –ø—Ä–æ–≥–æ–Ω –∑–∞–≤–µ—Ä—à–∏–ª—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫ `zsh: killed`
- –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ 20+ –ø–∏—Å–µ–º –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å –ø–∞–º—è—Ç—å—é
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ Google Vision OCR
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–ª–æ–∂–µ–Ω–∏–π

üìä **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
- –í—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–≥–æ –ø–∏—Å—å–º–∞: ~2-5 —Å–µ–∫—É–Ω–¥
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –¥–ª—è rate limit: 120 —Å–µ–∫—É–Ω–¥
- –£—Å–ø–µ—à–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (confidence: 96.71%)

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã Replicate payload:
```python
"max_tokens": 8000,
"temperature": 0,
"top_p": 0.9,
"frequency_penalty": 0.1,
"presence_penalty": 0.1
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏:
```python
import gc
# –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏
del chunk_result
gc.collect()
# –í –∫–æ–Ω—Ü–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏
del all_contacts, chunks
gc.collect()
```

## –°—Ç–∞—Ç—É—Å
üéØ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ:** –í—Å–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –≤–Ω–µ–¥—Ä–µ–Ω—ã –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã  
‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ –ø–∞–º—è—Ç–∏

---
*–û—Ç—á–µ—Ç —Å–æ–∑–¥–∞–Ω: 2025-01-21 23:15:00 (UTC+07)*
# –û—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –≤—Å–µ—Ö –∑–∞–¥–∞—á –∏–∑ —Å–ø–∏—Å–∫–∞ TODO

**–î–∞—Ç–∞:** 2025-08-26 16:52:00 (UTC+07)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –í—Å–µ –∑–∞–¥–∞—á–∏ –∑–∞–≤–µ—Ä—à–µ–Ω—ã  
**–ê–≤—Ç–æ—Ä:** IMPLEMENT –∞–≥–µ–Ω—Ç

## –û–±–∑–æ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á

–í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ —Å–ø–∏—Å–∫–∞ todo —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ contact_parser –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É.

### 1. ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–∏–∫–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
**–ó–∞–¥–∞—á–∞:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –ª–æ–≥–∏–∫–∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ —á–∞—Å—Ç–µ–π –≤ `_deduplicate_contacts` –∏ `_process_large_text`

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ –≤ –º–µ—Ç–æ–¥–µ `_deduplicate_contacts`
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤ –≤ –º–µ—Ç–æ–¥–µ `_process_large_text`
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏–∑ —á–∞—Å—Ç–µ–π
- –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–¥–∞–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –ø–æ email –∏ —Ç–µ–ª–µ—Ñ–æ–Ω—É

**–§–∞–π–ª—ã:** `src/llm_extractor.py`

### 2. ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∫—Ä—É–ø–Ω—ã—Ö –ø–∏—Å—å–º–∞—Ö
**–ó–∞–¥–∞—á–∞:** –ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –∫—Ä—É–ø–Ω—ã–º–∏ –ø–∏—Å—å–º–∞–º–∏ (>16K —Å–∏–º–≤–æ–ª–æ–≤)

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–∏—Å–µ–º –æ–±—ä–µ–º–æ–º –±–æ–ª–µ–µ 16K —Å–∏–º–≤–æ–ª–æ–≤
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–∞–∑–±–∏–≤–∫–∏ –Ω–∞ —á–∞—Å—Ç–∏ –ø–æ 8000 —Å–∏–º–≤–æ–ª–æ–≤ —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ–º 1000
- –°–∏—Å—Ç–µ–º–∞ —Å—Ç–∞–±–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±–æ–ª—å—à–∏–µ —Ç–µ–∫—Å—Ç—ã –±–µ–∑ –æ—à–∏–±–æ–∫ –ø–∞–º—è—Ç–∏
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –æ—á–∏—Å—Ç–∫–∞ –ø–∞–º—è—Ç–∏ –ø–æ—Å–ª–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∂–¥–æ–π —á–∞—Å—Ç–∏

**–§–∞–π–ª—ã:** `src/llm_extractor.py`, —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

### 3. ‚úÖ –ü–µ—Ä–µ–¥–∞—á–∞ —Ç–µ–ª–∞ –ø–∏—Å—å–º–∞ –∏ –≤–ª–æ–∂–µ–Ω–∏–π
**–ó–∞–¥–∞—á–∞:** –û–±–µ—Å–ø–µ—á–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É –Ω–∞ –∞–Ω–∞–ª–∏–∑ –∫–∞–∫ —Ç–µ–ª–∞ –ø–∏—Å—å–º–∞, —Ç–∞–∫ –∏ —Ç–µ–∫—Å—Ç–∞ –≤–ª–æ–∂–µ–Ω–∏–π

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–µ–ª–∞ –ø–∏—Å—å–º–∞ –≤ LLM –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OCR –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –≤–ª–æ–∂–µ–Ω–∏–π
- –°–∏—Å—Ç–µ–º–∞ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–µ–ª–∞ –ø–∏—Å—å–º–∞ –∏ –≤–ª–æ–∂–µ–Ω–∏–π –¥–ª—è –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
- –ò—Å–∫–ª—é—á–µ–Ω—ã base64 –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª—ã:** `src/integrated_llm_processor.py`, `src/advanced_email_fetcher.py`

### 4. ‚úÖ –ü–µ—Ä–µ–Ω–æ—Å –∑–∞–¥–∞—á –∏–∑ –ø–ª–∞–Ω–∞
**–ó–∞–¥–∞—á–∞:** –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –Ω–µ—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —ç—Ç–∞–ø—ã –∏–∑ `plan_20250826-2.md` –≤ `tasks.md`

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –ø–ª–∞–Ω `plan_20250826-2.md`
- –í—Å–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ `tasks.md`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–¥–∞—á —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- –ó–∞–¥–∞—á–∏ –æ—Ç–º–µ—á–µ–Ω—ã –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –ø–æ –º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**–§–∞–π–ª—ã:** `memory-bank/tasks.md`, `memory-bank/plan_20250826-2.md`

### 5. ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å Replicate
**–ó–∞–¥–∞—á–∞:** –£—Å—Ç—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º Replicate —Å–æ–≥–ª–∞—Å–Ω–æ –ø–ª–∞–Ω—É

**–í—ã–ø–æ–ª–Ω–µ–Ω–æ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å Replicate API
- –£–ª—É—á—à–µ–Ω–∞ —Ä–∞–∑–±–∏–≤–∫–∞ –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤ (chunk_size –¥–æ 12000)
- –£–≤–µ–ª–∏—á–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã –¥–æ 600 —Å–µ–∫—É–Ω–¥
- –£–ª—É—á—à–µ–Ω retry-–º–µ—Ö–∞–Ω–∏–∑–º —Å —É–≤–µ–ª–∏—á–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏ (10-60 —Å–µ–∫)
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ JSON (–æ—á–∏—Å—Ç–∫–∞ markdown, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–≤—ã—á–µ–∫)
- –î–æ–±–∞–≤–ª–µ–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ HTTP 201 –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Replicate

**–§–∞–π–ª—ã:** `src/llm_extractor.py`

**–û—Ç—á–µ—Ç—ã:** 
- `20250121_2300_replicate_fixes.md`
- `20250121_2315_replicate_json_fix.md`

## –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

### ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
1. **LLM Extractor** - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω —Å —Ç—Ä–µ–º—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
2. **Email Fetcher** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–∏—Å—å–º–∞ –∏ –≤–ª–æ–∂–µ–Ω–∏—è
3. **OCR Processor** - –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
4. **Fallback —Å–∏—Å—Ç–µ–º–∞** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º–∏
5. **JSON –≤–∞–ª–∏–¥–∞—Ü–∏—è** - —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –æ—Ç–≤–µ—Ç–æ–≤
6. **Rate limit handling** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π API

### üéØ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã. Contact parser –º–æ–∂–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å:
- –ü–∏—Å—å–º–∞ –ª—é–±–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ (—Å —Ä–∞–∑–±–∏–≤–∫–æ–π –Ω–∞ —á–∞—Å—Ç–∏)
- –í–ª–æ–∂–µ–Ω–∏—è —Å OCR –æ–±—Ä–∞–±–æ—Ç–∫–æ–π
- –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —á–µ—Ä–µ–∑ —Ç—Ä–∏ LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å–±–æ—è—Ö
- –î–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏—é –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API –∫–≤–æ—Ç
2. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –Ω–æ–≤—ã—Ö –æ—à–∏–±–æ–∫
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–æ–ª–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã
4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –°–ª–µ–¥–∏—Ç—å –∑–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ API –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤

---

**–ó–∞–∫–ª—é—á–µ–Ω–∏–µ:** –í—Å–µ –∑–∞–¥–∞—á–∏ –∏–∑ todo —Å–ø–∏—Å–∫–∞ —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã. –°–∏—Å—Ç–µ–º–∞ contact_parser –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ.

**–í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 2025-08-26 16:52:00 (UTC+07)
